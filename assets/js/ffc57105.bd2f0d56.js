"use strict";(self.webpackChunkrouter_docs=self.webpackChunkrouter_docs||[]).push([[8691],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=a.createContext({}),l=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=l(e.components);return a.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=l(t),f=r,m=d["".concat(c,".").concat(f)]||d[f]||u[f]||i;return t?a.createElement(m,s(s({ref:n},p),{},{components:t})):a.createElement(m,s({ref:n},p))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,s=new Array(i);s[0]=d;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var l=2;l<i;l++)s[l]=t[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},55282:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var a=t(87462),r=(t(67294),t(3905));const i={title:"burn_and_call_gateway",sidebar_position:2},s="burn_and_call_gateway Function",o={unversionedId:"message-transfer-via-crosstalk/near-guides/iDapp-functions/burn_and_call_gateway",id:"message-transfer-via-crosstalk/near-guides/iDapp-functions/burn_and_call_gateway",title:"burn_and_call_gateway",description:"This is a function in the ROUTE token contract on the NEAR chain. This is used to transfer ROUTE tokens from NEAR to another chain with or without instructions. These parameters include:",source:"@site/docs/develop/message-transfer-via-crosstalk/near-guides/iDapp-functions/burn_and_call_gateway.md",sourceDirName:"message-transfer-via-crosstalk/near-guides/iDapp-functions",slug:"/message-transfer-via-crosstalk/near-guides/iDapp-functions/burn_and_call_gateway",permalink:"/develop/message-transfer-via-crosstalk/near-guides/iDapp-functions/burn_and_call_gateway",draft:!1,editUrl:"https://github.com/router-protocol/docs/tree/main/docs/develop/message-transfer-via-crosstalk/near-guides/iDapp-functions/burn_and_call_gateway.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"burn_and_call_gateway",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"i_send",permalink:"/develop/message-transfer-via-crosstalk/near-guides/iDapp-functions/i_send"},next:{title:"i_receive",permalink:"/develop/message-transfer-via-crosstalk/near-guides/iDapp-functions/i_receive"}},c={},l=[{value:"1) <code>is_app_token_payer</code>",id:"1-is_app_token_payer",level:3},{value:"2) <code>amount</code>",id:"2-amount",level:3},{value:"3) <code>msg</code>",id:"3-msg",level:3}],p={toc:l};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"burn_and_call_gateway-function"},(0,r.kt)("inlineCode",{parentName:"h1"},"burn_and_call_gateway")," Function"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"#[payable]\npub fn burn_and_call_gateway(\n   &mut self,\n   is_app_token_payer: bool,\n   amount: U128,\n   msg: Base64VecU8,\n) -> Promise\n")),(0,r.kt)("p",null,"This is a function in the ROUTE token contract on the NEAR chain. This is used to transfer ROUTE tokens from NEAR to another chain with or without instructions. These parameters include:"),(0,r.kt)("h3",{id:"1-is_app_token_payer"},"1) ",(0,r.kt)("inlineCode",{parentName:"h3"},"is_app_token_payer")),(0,r.kt)("p",null,"This boolean flag determines whether or not the the dApp's ROUTE tokens will be sent to the destination chain. If the flag is set to false, the end user who invokes the function will be responsible for paying for the ROUTE tokens. Conversely, if the flag is set to true, the application that calls the function will be responsible for paying for the ROUTE tokens."),(0,r.kt)("h3",{id:"2-amount"},"2) ",(0,r.kt)("inlineCode",{parentName:"h3"},"amount")),(0,r.kt)("p",null,"The amount of ROUTE tokens to be transferred to the destination chain."),(0,r.kt)("h3",{id:"3-msg"},"3) ",(0,r.kt)("inlineCode",{parentName:"h3"},"msg")),(0,r.kt)("p",null,"This is a ",(0,r.kt)("inlineCode",{parentName:"p"},"base64")," encoded string which consists of the ",(0,r.kt)("inlineCode",{parentName:"p"},"ISendParams")," parameters to be sent to the Gateway. The ",(0,r.kt)("inlineCode",{parentName:"p"},"ISendParams")," consists of the following parameters:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'#[derive(Debug, Clone, PartialEq, Eq, Serialize, Deserialize)]\n#[serde(rename_all = "snake_case")]\n#[serde(crate = "near_sdk::serde")]\npub struct ISendParams {\n    pub version: U128,\n    pub route_recipient: String,\n    pub dest_chain_id: String,\n    pub request_metadata: Vec<u8>,\n    pub request_packet: Vec<u8>,\n}\n\n')),(0,r.kt)("p",null,"All of these parameters are explained in the ",(0,r.kt)("a",{parentName:"p",href:"./i_send"},"previous")," section. To encode these parameters into a ",(0,r.kt)("inlineCode",{parentName:"p"},"base64")," string, you can use the following function:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'use near_sdk::{serde_json};\nuse near_sdk::base64::{encode};\n\nfn encode_base64(\n   version: U128,\n   route_recipient: String,\n   dest_chain_id: String,\n   request_metadata: Vec<u8>,\n   request_packet: Vec<u8>\n) {\n    let i_send_params: ISendParams = ISendParams {\n        version,\n        route_recipient,\n        dest_chain_id,\n        request_packet,\n        request_metadata\n    };\n\n    let json_str = serde_json::to_string(&i_send_params);\n    println!("{}", encode(json_str.unwrap()));\n}\n')),(0,r.kt)("p",null,"After you call this function, a cross-chain request is created and relayed via the Router chain to the destination chain where the ",(0,r.kt)("inlineCode",{parentName:"p"},"i_receive")," function is called on the destination contract address passed in the ",(0,r.kt)("inlineCode",{parentName:"p"},"request_packet"),"."))}u.isMDXComponent=!0}}]);
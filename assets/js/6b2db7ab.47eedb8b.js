"use strict";(self.webpackChunkrouter_docs=self.webpackChunkrouter_docs||[]).push([[1639],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>p});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),h=l(a),p=r,m=h["".concat(c,".").concat(p)]||h[p]||u[p]||i;return a?n.createElement(m,s(s({ref:t},d),{},{components:a})):n.createElement(m,s({ref:t},d))}));function p(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=h;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var l=2;l<i;l++)s[l]=a[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},75612:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var n=a(87462),r=(a(67294),a(3905));const i={title:"Creating and Sending a Cross-chain Read Request",sidebar_position:2},s=void 0,o={unversionedId:"cross-chain-read-requests/near_guides/creating-and-sending-a-cross-chain-read-request",id:"cross-chain-read-requests/near_guides/creating-and-sending-a-cross-chain-read-request",title:"Creating and Sending a Cross-chain Read Request",description:"To create a cross-chain read request, one needs to call the readQueryToDest() function on Router\u2019s Gateway contract with the following parameters:",source:"@site/docs/crosstalk/cross-chain-read-requests/near_guides/creating-and-sending-a-cross-chain-read-request.md",sourceDirName:"cross-chain-read-requests/near_guides",slug:"/cross-chain-read-requests/near_guides/creating-and-sending-a-cross-chain-read-request",permalink:"/crosstalk/cross-chain-read-requests/near_guides/creating-and-sending-a-cross-chain-read-request",draft:!1,editUrl:"https://github.com/router-protocol/docs/tree/main/docs/crosstalk/cross-chain-read-requests/near_guides/creating-and-sending-a-cross-chain-read-request.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Creating and Sending a Cross-chain Read Request",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Handling the Acknowledgment on the Source Chain",permalink:"/crosstalk/cross-chain-read-requests/evm_guides/handling-the-acknowledgment-on-the-source-chain"},next:{title:"Handling the Acknowledgment on the Source Chain",permalink:"/crosstalk/cross-chain-read-requests/near_guides/handling-the-acknowledgment-on-the-source-chain"}},c={},l=[{value:"1. contractCalls",id:"1-contractcalls",level:3},{value:"2. requestArgs",id:"2-requestargs",level:3},{value:"3. destinationChainParams",id:"3-destinationchainparams",level:3},{value:"4. ackGasParams",id:"4-ackgasparams",level:3}],d={toc:l};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"To create a cross-chain read request, one needs to call the ",(0,r.kt)("inlineCode",{parentName:"p"},"readQueryToDest()")," function on Router\u2019s Gateway contract with the following parameters:"),(0,r.kt)("h3",{id:"1-contractcalls"},"1. contractCalls"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"contractCalls")," parameter includes an array of payloads (read function calls) and an array of contract addresses on the destination chain where the respective payload should be sent. The payload will include the ABI-encoded function calls that are to be executed on the destination chain. "),(0,r.kt)("h3",{id:"2-requestargs"},"2. requestArgs"),(0,r.kt)("p",null,"This parameter includes a struct comprising of the following subparameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"isAtomicCalls:")," Since users can use the ",(0,r.kt)("inlineCode",{parentName:"li"},"readQueryToDest()")," function to send multiple cross-chain calls in one go, the ",(0,r.kt)("inlineCode",{parentName:"li"},"isAtomicCalls")," boolean value ensures whether the calls are atomic.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If this variable is set to \\textbf{true`, either all the contract calls will be executed on the destination chain, or none of them will be executed."),(0,r.kt)("li",{parentName:"ul"},"If this variable is set to \\textbf{false`, then even if some of the contract calls fail on the destination chain, other calls won't be affected."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expiryTimestamp:")," The timestamp by which your cross-chain call will expire. If your call is not executed on the destination chain by this time, it will be reverted. If you don't want any expiry timestamp, pass ",(0,r.kt)("inlineCode",{parentName:"li"},"type(uint64).max")," as the ",(0,r.kt)("inlineCode",{parentName:"li"},"expiryTimestamp"),".")),(0,r.kt)("h3",{id:"3-destinationchainparams"},"3. destinationChainParams"),(0,r.kt)("p",null,"In this parameter, users can specify the gas they are willing to pay to execute their read request, along with the details of the destination chain where the request needs to be executed. This parameter needs to be passed as a struct containing the following subparameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"gasLimit:")," The gas limit required to execute the cross-chain read request on the destination chain."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"gasPrice:")," The gas price that the user is willing to pay for the execution of the request."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"destChainId:")," Chain ID of the destination chain in string format."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"destChainType:")," This represents the type of chain. The values for chain types are given ",(0,r.kt)("a",{href:"/crosstalk/understanding-crosstalk/chainTypes",target:"_blank"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"asmAddress:")," The address of Additional Security Module (ASM) contract that acts as a plugin which enables users to seamlessly integrate their own security mechanism into their DApp.")),(0,r.kt)("h3",{id:"4-ackgasparams"},"4. ackGasParams"),(0,r.kt)("p",null,"Once the cross-chain read request is executed on the destination chain, the requested data is sent back to the source chain as an acknowledgment. To handle this acknowledgment, users need to include a callback function (discussed ",(0,r.kt)("a",{href:"./handling-the-acknowledgment-on-the-source-chain",target:"_blank"},"here"),"). The ackGasParams parameter includes the ",(0,r.kt)("inlineCode",{parentName:"p"},"gasLimit")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"gasPrice")," required to execute the callback function on the source chain when the acknowledgment is received. The gas limit depends on the complexity of the callback function, and the gas price depends on the source chain congestion. The gas limit can easily be calculated using the hardhat-gas-reporter plugin. For the gas price, you can use web3/ethers library\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"provider.getGasPrice()")," function."))}u.isMDXComponent=!0}}]);